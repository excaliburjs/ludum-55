function t(t,e,i,p){Object.defineProperty(t,e,{get:i,set:p,enumerable:!0,configurable:!0})}var e=globalThis.parcelRequire213c,i=e.register;i("disUu",function(i,p){Object.defineProperty(i.exports,"__esModule",{value:!0,configurable:!0}),t(i.exports,"default",()=>d);var s,h=e("1TuIX");function a(){this.oldParams=!0,this.wave_type=0,this.p_env_attack=0,this.p_env_sustain=.3,this.p_env_punch=0,this.p_env_decay=.4,this.p_base_freq=.3,this.p_freq_limit=0,this.p_freq_ramp=0,this.p_freq_dramp=0,this.p_vib_strength=0,this.p_vib_speed=0,this.p_arp_mod=0,this.p_arp_speed=0,this.p_duty=0,this.p_duty_ramp=0,this.p_repeat_speed=0,this.p_pha_offset=0,this.p_pha_ramp=0,this.p_lpf_freq=1,this.p_lpf_ramp=0,this.p_lpf_resonance=0,this.p_hpf_freq=0,this.p_hpf_ramp=0,this.sound_vol=.5,this.sample_rate=44100,this.sample_size=8}function r(t){return Math.random()*t}function _(t,e){return Math.random()*(e-t)+t}function n(t){return Math.floor(Math.random()*(t+1))}function f(t,e,i){return t<<31|e<<23|i}var o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",u=["wave_type","p_env_attack","p_env_sustain","p_env_punch","p_env_decay","p_base_freq","p_freq_limit","p_freq_ramp","p_freq_dramp","p_vib_strength","p_vib_speed","p_arp_mod","p_arp_speed","p_duty","p_duty_ramp","p_repeat_speed","p_pha_offset","p_pha_ramp","p_lpf_freq","p_lpf_ramp","p_lpf_resonance","p_hpf_freq","p_hpf_ramp"];a.prototype.toB58=function(){var t=[];for(var e in u){var i=u[e];if("wave_type"==i)t.push(this[i]);else if(0==i.indexOf("p_")){var p=this[i];p=function(t){if(isNaN(t))return f(0,255,4919);var e=t<0?1:0;if(0==(t=Math.abs(t)))return f(e,0,0);var i=Math.floor(Math.log(t)/Math.LN2);if(i>127||i<-126)return f(e,255,0);var p=t/Math.pow(2,i);return f(e,i+127,8388608*p&8388607)}(p),t.push(255&p),t.push(255&p>>8),t.push(255&p>>16),t.push(255&p>>24)}}return function(t,e){var i,p,s,h,a=[],r="";for(i in t)for(p=0,s=t[i],r+=s||r.length^i?"":1;(p in a)||s;)s=(h=(h=a[p])?256*h+s:s)/58|0,a[p]=h%58,p++;for(;p--;)r+=e[a[p]];return r}(t,o)},a.prototype.fromB58=function(t){return this.fromJSON(s.b58decode(t)),this},a.prototype.fromJSON=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this},a.prototype.pickupCoin=function(){return this.wave_type=1,this.p_base_freq=.4+r(.5),this.p_env_attack=0,this.p_env_sustain=r(.1),this.p_env_decay=.1+r(.4),this.p_env_punch=.3+r(.3),n(1)&&(this.p_arp_speed=.5+r(.2),this.p_arp_mod=.2+r(.4)),this},a.prototype.laserShoot=function(){return this.wave_type=n(2),2===this.wave_type&&n(1)&&(this.wave_type=n(1)),0===n(2)?(this.p_base_freq=.3+r(.6),this.p_freq_limit=r(.1),this.p_freq_ramp=-.35-r(.3)):(this.p_base_freq=.5+r(.5),this.p_freq_limit=this.p_base_freq-.2-r(.6),this.p_freq_limit<.2&&(this.p_freq_limit=.2),this.p_freq_ramp=-.15-r(.2)),1===this.wave_type&&(this.p_duty=1),n(1)?(this.p_duty=r(.5),this.p_duty_ramp=r(.2)):(this.p_duty=.4+r(.5),this.p_duty_ramp=-r(.7)),this.p_env_attack=0,this.p_env_sustain=.1+r(.2),this.p_env_decay=r(.4),n(1)&&(this.p_env_punch=r(.3)),0===n(2)&&(this.p_pha_offset=r(.2),this.p_pha_ramp=-r(.2)),this.p_hpf_freq=r(.3),this},a.prototype.explosion=function(){var t,e;return(this.wave_type=3,n(1))?(this.p_base_freq=(t=.1+r(.4))*t,this.p_freq_ramp=-.1+r(.4)):(this.p_base_freq=(e=.2+r(.7))*e,this.p_freq_ramp=-.2-r(.2)),0===n(4)&&(this.p_freq_ramp=0),0===n(2)&&(this.p_repeat_speed=.3+r(.5)),this.p_env_attack=0,this.p_env_sustain=.1+r(.3),this.p_env_decay=r(.5),n(1)&&(this.p_pha_offset=-.3+r(.9),this.p_pha_ramp=-r(.3)),this.p_env_punch=.2+r(.6),n(1)&&(this.p_vib_strength=r(.7),this.p_vib_speed=r(.6)),0===n(2)&&(this.p_arp_speed=.6+r(.3),this.p_arp_mod=.8-r(1.6)),this},a.prototype.powerUp=function(){return n(1)?(this.wave_type=1,this.p_duty=1):this.p_duty=r(.6),this.p_base_freq=.2+r(.3),n(1)?(this.p_freq_ramp=.1+r(.4),this.p_repeat_speed=.4+r(.4)):(this.p_freq_ramp=.05+r(.2),n(1)&&(this.p_vib_strength=r(.7),this.p_vib_speed=r(.6))),this.p_env_attack=0,this.p_env_sustain=r(.4),this.p_env_decay=.1+r(.4),this},a.prototype.hitHurt=function(){return this.wave_type=n(2),2===this.wave_type&&(this.wave_type=3),0===this.wave_type&&(this.p_duty=r(.6)),1===this.wave_type&&(this.p_duty=1),this.p_base_freq=.2+r(.6),this.p_freq_ramp=-.3-r(.4),this.p_env_attack=0,this.p_env_sustain=r(.1),this.p_env_decay=.1+r(.2),n(1)&&(this.p_hpf_freq=r(.3)),this},a.prototype.jump=function(){return this.wave_type=0,this.p_duty=r(.6),this.p_base_freq=.3+r(.3),this.p_freq_ramp=.1+r(.2),this.p_env_attack=0,this.p_env_sustain=.1+r(.3),this.p_env_decay=.1+r(.2),n(1)&&(this.p_hpf_freq=r(.3)),n(1)&&(this.p_lpf_freq=1-r(.6)),this},a.prototype.blipSelect=function(){return this.wave_type=n(1),0===this.wave_type?this.p_duty=r(.6):this.p_duty=1,this.p_base_freq=.2+r(.4),this.p_env_attack=0,this.p_env_sustain=.1+r(.1),this.p_env_decay=r(.2),this.p_hpf_freq=.1,this},a.prototype.synth=function(){return this.wave_type=n(1),this.p_base_freq=[.2723171360931539,.19255692561524382,.13615778746815113][n(2)],this.p_env_attack=n(4)>3?r(.5):0,this.p_env_sustain=r(1),this.p_env_punch=r(1),this.p_env_decay=r(.9)+.1,this.p_arp_mod=[0,0,0,0,-.3162,.7454,.7454][n(6)],this.p_arp_speed=r(.5)+.4,this.p_duty=r(1),this.p_duty_ramp=2==n(2)?r(1):0,this.p_lpf_freq=[1,.9*r(1)*r(1)+.1][n(1)],this.p_lpf_ramp=_(-1,1),this.p_lpf_resonance=r(1),this.p_hpf_freq=3==n(3)?r(1):0,this.p_hpf_ramp=3==n(3)?r(1):0,this},a.prototype.tone=function(){return this.wave_type=2,this.p_base_freq=.35173364,this.p_env_attack=0,this.p_env_sustain=.6641,this.p_env_decay=0,this.p_env_punch=0,this},a.prototype.click=function(){return this[["explosion","hitHurt"][n(1)]](),n(1)&&(this.p_freq_ramp=-.5+r(1)),n(1)&&(this.p_env_sustain=(r(.4)+.2)*this.p_env_sustain,this.p_env_decay=(r(.4)+.2)*this.p_env_decay),0==n(3)&&(this.p_env_attack=r(.3)),this.p_base_freq=1-r(.25),this.p_hpf_freq=1-r(.1),this},a.prototype.random=function(){var t,e,i,p;return(this.wave_type=n(3),n(1))?this.p_base_freq=(t=r(2)-1)*t*t+.5:this.p_base_freq=(e=r(1))*e,this.p_freq_limit=0,this.p_freq_ramp=Math.pow(r(2)-1,5),this.p_base_freq>.7&&this.p_freq_ramp>.2&&(this.p_freq_ramp=-this.p_freq_ramp),this.p_base_freq<.2&&this.p_freq_ramp<-.05&&(this.p_freq_ramp=-this.p_freq_ramp),this.p_freq_dramp=Math.pow(r(2)-1,3),this.p_duty=r(2)-1,this.p_duty_ramp=Math.pow(r(2)-1,3),this.p_vib_strength=Math.pow(r(2)-1,3),this.p_vib_speed=_(-1,1),this.p_env_attack=(i=_(-1,1))*i*i,this.p_env_sustain=(p=_(-1,1))*p,this.p_env_decay=_(-1,1),this.p_env_punch=Math.pow(r(.8),2),this.p_env_attack+this.p_env_sustain+this.p_env_decay<.2&&(this.p_env_sustain+=.2+r(.3),this.p_env_decay+=.2+r(.3)),this.p_lpf_resonance=_(-1,1),this.p_lpf_freq=1-Math.pow(r(1),3),this.p_lpf_ramp=Math.pow(r(2)-1,3),this.p_lpf_freq<.1&&this.p_lpf_ramp<-.05&&(this.p_lpf_ramp=-this.p_lpf_ramp),this.p_hpf_freq=Math.pow(r(1),5),this.p_hpf_ramp=Math.pow(r(2)-1,5),this.p_pha_offset=Math.pow(r(2)-1,3),this.p_pha_ramp=Math.pow(r(2)-1,3),this.p_repeat_speed=r(2)-1,this.p_arp_speed=r(2)-1,this.p_arp_mod=r(2)-1,this},a.prototype.mutate=function(){return n(1)&&(this.p_base_freq+=r(.1)-.05),n(1)&&(this.p_freq_ramp+=r(.1)-.05),n(1)&&(this.p_freq_dramp+=r(.1)-.05),n(1)&&(this.p_duty+=r(.1)-.05),n(1)&&(this.p_duty_ramp+=r(.1)-.05),n(1)&&(this.p_vib_strength+=r(.1)-.05),n(1)&&(this.p_vib_speed+=r(.1)-.05),n(1)&&(this.p_vib_delay+=r(.1)-.05),n(1)&&(this.p_env_attack+=r(.1)-.05),n(1)&&(this.p_env_sustain+=r(.1)-.05),n(1)&&(this.p_env_decay+=r(.1)-.05),n(1)&&(this.p_env_punch+=r(.1)-.05),n(1)&&(this.p_lpf_resonance+=r(.1)-.05),n(1)&&(this.p_lpf_freq+=r(.1)-.05),n(1)&&(this.p_lpf_ramp+=r(.1)-.05),n(1)&&(this.p_hpf_freq+=r(.1)-.05),n(1)&&(this.p_hpf_ramp+=r(.1)-.05),n(1)&&(this.p_pha_offset+=r(.1)-.05),n(1)&&(this.p_pha_ramp+=r(.1)-.05),n(1)&&(this.p_repeat_speed+=r(.1)-.05),n(1)&&(this.p_arp_speed+=r(.1)-.05),n(1)&&(this.p_arp_mod+=r(.1)-.05),this};var d=s={};function l(t){if("string"==typeof t){var e=new a;0==t.indexOf("#")&&(t=t.slice(1)),t=e.fromB58(t)}this.init(t)}s.toBuffer=function(t){return new l(t).getRawBuffer().buffer},s.toWebAudio=function(t,e){var i=new l(t),p=i.getRawBuffer().normalized;if(e){for(var s=e.createBuffer(1,p.length,i.sampleRate),h=s.getChannelData(0),a=0;a<p.length;a++)h[a]=p[a];var r=e.createBufferSource();return r.buffer=s,r}},s.toWave=function(t){return new l(t).generate()},s.toAudio=function(t){return s.toWave(t).getAudio()},s.play=function(t){return s.toAudio(t).play()},s.b58decode=function(t){var e=function(t,e){var i,p,s,h,a=[],r=[];for(i in t){if(p=0,(s=e.indexOf(t[i]))<0)return;for(s||r.length^i||r.push(0);(p in a)||s;)s=(h=(h=a[p])?58*h+s:s)>>8,a[p]=h%256,p++}for(;p--;)r.push(a[p]);return new Uint8Array(r)}(t,o),i={};for(var p in u){var s=u[p],h=(p-1)*4+1;if("wave_type"==s)i[s]=e[0];else{var a=e[h]|e[h+1]<<8|e[h+2]<<16|e[h+3]<<24;i[s]=function(t){var e=2147483648&t?-1:1,i=(t>>23&255)-127,p=8388607&t;if(128==i)return e*(p?Number.NaN:Number.POSITIVE_INFINITY);if(-127==i){if(0==p)return 0*e;i=-126,p/=4194304}else p=(8388608|p)/8388608;return e*p*Math.pow(2,i)}(a)}}return i},s.b58encode=function(t){var e=new a;return e.fromJSON(t),e.toB58()},s.generate=function(t,e){let i=new a,p=e||{};return i.sound_vol=p.sound_vol||.25,i.sample_rate=p.sample_rate||44100,i.sample_size=p.sample_size||8,i[t]()},l.prototype.init=function(t){this.parameters=t,this.initForRepeat(),this.waveShape=parseInt(t.wave_type),this.fltw=.1*Math.pow(t.p_lpf_freq,3),this.enableLowPassFilter=1!=t.p_lpf_freq,this.fltw_d=1+1e-4*t.p_lpf_ramp,this.fltdmp=5/(1+20*Math.pow(t.p_lpf_resonance,2))*(.01+this.fltw),this.fltdmp>.8&&(this.fltdmp=.8),this.flthp=.1*Math.pow(t.p_hpf_freq,2),this.flthp_d=1+3e-4*t.p_hpf_ramp,this.vibratoSpeed=.01*Math.pow(t.p_vib_speed,2),this.vibratoAmplitude=.5*t.p_vib_strength,this.envelopeLength=[Math.floor(t.p_env_attack*t.p_env_attack*1e5),Math.floor(t.p_env_sustain*t.p_env_sustain*1e5),Math.floor(t.p_env_decay*t.p_env_decay*1e5)],this.envelopePunch=t.p_env_punch,this.flangerOffset=1020*Math.pow(t.p_pha_offset,2),t.p_pha_offset<0&&(this.flangerOffset=-this.flangerOffset),this.flangerOffsetSlide=1*Math.pow(t.p_pha_ramp,2),t.p_pha_ramp<0&&(this.flangerOffsetSlide=-this.flangerOffsetSlide),this.repeatTime=Math.floor(2e4*Math.pow(1-t.p_repeat_speed,2)+32),0===t.p_repeat_speed&&(this.repeatTime=0),this.gain=Math.exp(t.sound_vol)-1,this.sampleRate=t.sample_rate,this.bitsPerChannel=t.sample_size},l.prototype.initForRepeat=function(){var t=this.parameters;this.elapsedSinceRepeat=0,this.period=100/(t.p_base_freq*t.p_base_freq+.001),this.periodMax=100/(t.p_freq_limit*t.p_freq_limit+.001),this.enableFrequencyCutoff=t.p_freq_limit>0,this.periodMult=1-.01*Math.pow(t.p_freq_ramp,3),this.periodMultSlide=-(1e-6*Math.pow(t.p_freq_dramp,3)),this.dutyCycle=.5-.5*t.p_duty,this.dutyCycleSlide=-(5e-5*t.p_duty_ramp),t.p_arp_mod>=0?this.arpeggioMultiplier=1-.9*Math.pow(t.p_arp_mod,2):this.arpeggioMultiplier=1+10*Math.pow(t.p_arp_mod,2),this.arpeggioTime=Math.floor(2e4*Math.pow(1-t.p_arp_speed,2)+32),1===t.p_arp_speed&&(this.arpeggioTime=0)},l.prototype.getRawBuffer=function(){for(var t=0,e=0,i=0,p=Array(32),s=0;s<32;++s)p[s]=2*Math.random()-1;for(var h=0,a=0,r=0,_=0,n=0,f=Array(1024),s=0;s<1024;++s)f[s]=0;for(var o=0,u=[],d=[],l=0,v=0,c=Math.floor(44100/this.sampleRate),m=0;0!=this.repeatTime&&++this.elapsedSinceRepeat>=this.repeatTime&&this.initForRepeat(),0!=this.arpeggioTime&&m>=this.arpeggioTime&&(this.arpeggioTime=0,this.period*=this.arpeggioMultiplier),this.periodMult+=this.periodMultSlide,this.period*=this.periodMult,!(this.period>this.periodMax)||(this.period=this.periodMax,!this.enableFrequencyCutoff);++m){var y,b=this.period;this.vibratoAmplitude>0&&(r+=this.vibratoSpeed,b=this.period*(1+Math.sin(r)*this.vibratoAmplitude));var w=Math.floor(b);if(w<8&&(w=8),this.dutyCycle+=this.dutyCycleSlide,this.dutyCycle<0&&(this.dutyCycle=0),this.dutyCycle>.5&&(this.dutyCycle=.5),++a>this.envelopeLength[h]&&(a=0,++h>2))break;var q=a/this.envelopeLength[h];y=0===h?q:1===h?1+(1-q)*2*this.envelopePunch:1-q,this.flangerOffset+=this.flangerOffsetSlide;var g=Math.abs(Math.floor(this.flangerOffset));g>1023&&(g=1023),0!=this.flthp_d&&(this.flthp*=this.flthp_d,this.flthp<1e-5&&(this.flthp=1e-5),this.flthp>.1&&(this.flthp=.1));for(var M=0,k=0;k<8;++k){var S=0;if(++_>=w&&(_%=w,3===this.waveShape))for(var s=0;s<32;++s)p[s]=2*Math.random()-1;var C=_/w;if(0===this.waveShape)S=C<this.dutyCycle?.5:-.5;else if(1===this.waveShape)S=C<this.dutyCycle?-1+2*C/this.dutyCycle:1-2*(C-this.dutyCycle)/(1-this.dutyCycle);else if(2===this.waveShape)S=Math.sin(2*C*Math.PI);else if(3===this.waveShape)S=p[Math.floor(32*_/w)];else throw"ERROR: Bad wave type: "+this.waveShape;var R=t;this.fltw*=this.fltw_d,this.fltw<0&&(this.fltw=0),this.fltw>.1&&(this.fltw=.1),this.enableLowPassFilter?(e+=(S-t)*this.fltw,e-=e*this.fltdmp):(t=S,e=0),t+=e,i+=t-R,i-=i*this.flthp,S=i,f[1023&n]=S,S+=f[n-g+1024&1023],n=n+1&1023,M+=S*y}l+=M,++v>=c&&(v=0,M=l/c,l=0,M=M/8*1*this.gain,d.push(M),8===this.bitsPerChannel?((M=Math.floor((M+1)*128))>255?(M=255,++o):M<0&&(M=0,++o),u.push(M)):((M=Math.floor(32768*M))>=32768?(M=32767,++o):M<-32768&&(M=-32768,++o),u.push(255&M),u.push(M>>8&255)))}return{buffer:u,normalized:d,clipped:o}},l.prototype.generate=function(){var t=this.getRawBuffer(),e=new h.default;return e.header.sampleRate=this.sampleRate,e.header.bitsPerSample=this.bitsPerChannel,e.Make(t.buffer),e.clipping=t.clipped,e.buffer=t.normalized,e.getAudio=c(e),e};var v=null,c=function(t){return function(){var e=null;if(!v&&("AudioContext"in window?v=new AudioContext:"webkitAudioContext"in window&&(v=new webkitAudioContext)),e=v){for(var i=e.createBuffer(1,t.buffer.length,t.header.sampleRate),p=i.getChannelData(0),s=0;s<t.buffer.length;s++)p[s]=t.buffer[s];var h=1,a={channels:[],setVolume:function(t){return h=t,a},play:function(){var t=e.createBufferSource();t.buffer=i;var p=e.createGain();return p.gain.value=h,p.connect(e.destination),t.connect(p),t.start?t.start():t.noteOn&&t.noteOn(0),this.channels.push(t),t}};return a}var r=new Audio;return r.src=t.dataURI,r}}}),i("1TuIX",function(e,i){t(e.exports,"default",()=>s);let p={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var t=0;t<4096;t++)this.encLookup[t]=this.chars[t>>6]+this.chars[63&t]},Encode:function(t){for(var e=t.length,i="",p=0;e>2;){let s=t[p]<<16|t[p+1]<<8|t[p+2];i+=this.encLookup[s>>12]+this.encLookup[4095&s],e-=3,p+=3}if(e>0){var s=(252&t[p])>>2,h=(3&t[p])<<4;if(e>1&&(h|=(240&t[++p])>>4),i+=this.chars[s]+this.chars[h],2==e){var a=(15&t[p++])<<2;a|=(192&t[p])>>6,i+=this.chars[a]}1==e&&(i+="="),i+="="}return i}};p.Init();var s=function(t){function e(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function i(t){return[255&t,t>>8&255]}this.data,this.wav,this.dataURI,this.data=[],this.wav=[],this.dataURI="",this.header={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8e3,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0},this.Make=function(t){t instanceof Array&&(this.data=t),this.header.byteRate=this.header.sampleRate*this.header.numChannels*this.header.bitsPerSample>>3,this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>3,this.header.subChunk2Size=this.data.length,this.header.chunkSize=36+this.header.subChunk2Size,this.wav=this.header.chunkId.concat(e(this.header.chunkSize),this.header.format,this.header.subChunk1Id,e(this.header.subChunk1Size),i(this.header.audioFormat),i(this.header.numChannels),e(this.header.sampleRate),e(this.header.byteRate),i(this.header.blockAlign),i(this.header.bitsPerSample),this.header.subChunk2Id,e(this.header.subChunk2Size),this.data),this.dataURI="data:audio/wav;base64,"+p.Encode(this.wav)},t instanceof Array&&this.Make(t)}});
//# sourceMappingURL=sfxr.d2fa2fe4.js.map
